<div>
    <button id="create-coupon-button" (click)="onCreateCoupnClick()">Create coupon</button>
    <div id="coupons-div">
        <ul class="coupons-list">
            <li *ngFor="let c of coupons">
                <div class="coupons-card">
                    <div class="coupon-content">
                        <div class="label-data-div code-label">
                            <span class="label">Code:</span>
                            <span class="data">{{ c.code }}</span>
                        </div>
                        <div class="label-data-div discount-label">
                            <span class="label">Discount:</span>
                            <span class="data">{{ c.discountPercentage }}%</span>
                        </div>
                        
                        <div class="label-data-div expiration-label">
                            <span class="label">Expiration Date:</span>
                            <span class="data">
                                {{ c.expirationDate | date: 'dd.MM.yyyy.'}} <i class="material-icons icon-schedule">schedule</i> {{ c.expirationDate | date: 'HH:mm'}}
                             </span>                                                
                        </div>
                        <div class="label-data-div status-label">
                            <span class="data">{{ getGlobalStatusText(c.isGlobal) }}</span>
                        </div>
                    </div>
                    <div class="coupon-buttons">
                        <div>
                            <button (click)="editCoupon(c)">
                                <mat-icon>edit</mat-icon> 
                            </button>
                            <button (click)="deleteCoupons(c.id)">
                                <mat-icon>delete</mat-icon> 
                            </button>
                        </div>
                    </div>
                </div>
            </li>
        </ul>
    </div>


    <div *ngIf="isEditing">
        <div>
            <div id="create-coupon-div">
                <form id="create-coupon-form" (ngSubmit)="updateCoupon()">
                    <fieldset id="create-coupon-fieldset">
                        <legend>Update coupon</legend>
    
                        <label for="discount-percentage">Discount percentage:</label>
                        <input id="discount-percentage" type="number" step="10" min="0" max="100" required [(ngModel)]="discountPercentage" name="discountPercentage">
    
                        <label for="expiration-date">Expiration date:</label>
                        <input id="expiration-date"  type="date" required [ngModel]="expirationDate | date:'yyyy-MM-dd'" (ngModelChange)="expirationDate = $event" name="expirationDate">
    
                        <div class="checkbox-container">
                            <input id="is-global" type="checkbox" [(ngModel)]="isGlobal" name="isGlobal">
                            <label id="is-global-label" for="is-global">Is global</label>
                        </div>
    
                        <!-- Add available tours -->
                        <div id="available-tours-div" *ngIf="!isGlobal">
                            <label>Available tours:</label>
                            <ul>
                                <li class="tour-name" *ngFor="let t of tours"> 
                                    <div class="radio-container">
                                        <input id="input-radio" type="radio" name="selectedTour" [(ngModel)]="selectedTourId" [value]="t.id">
                                        <label id="label-radio" for="input-radio">{{t.name}}</label>
                                    </div>
                                </li>
                            </ul>
                        </div>
    
                        <div class="button-container">
                            <input id="submit-button" class="update-button" type="submit" value="Update">
                            <button type="button" class="cancel-button" (click)="cancelUpdate()">Cancel</button>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
    
</div>
