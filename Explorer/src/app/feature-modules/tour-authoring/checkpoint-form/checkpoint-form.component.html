<form [formGroup]="checkpointForm">
    <div id="checkpoint">
        <p class="subtitle">Create checkpoint</p>
        <br>
        <p>Choose one of public checkpoints: </p>
        <select (change)="onPublicCPChange($event)" formControlName="publicCP">
            <option *ngFor="let p of publicCheckpoints" [ngValue]="p.id">{{p.name}}</option>
        </select>
        <mat-form-field>
            <mat-label>Name:</mat-label>
            <input matInput type="text" formControlName="name">
        </mat-form-field>
        <mat-form-field>
            <mat-label>Description:</mat-label>
            <input matInput type="text" formControlName="description">
        </mat-form-field>
        <mat-label>Required time:</mat-label>
        <div class="time">
            <mat-form-field>
                <mat-label>hours</mat-label>
                <input matInput type="number" min="0" step="1" formControlName="hours">
            </mat-form-field>
            <mat-form-field>
                <mat-label>minutes</mat-label>
                <input matInput type="number" min="0" max="60" step="5" formControlName="minutes">
            </mat-form-field>
        </div>
        <p>Input address or choose on map:</p>
        <div class="address">
            <mat-label>Address:     </mat-label>
            <input matInput type="text" formControlName="address" class="adress-input">
            <button class="buttonPlus" (click)="onAddAddressClick()" mat-raised-button>âœ”</button>
        </div>
        <div class="map-div">
            <xp-map (mapClick)="onMapClick($event)"></xp-map>
        </div>
        <div class="location">
            <mat-form-field>
                <mat-label>Longitude:</mat-label>
                <input matInput type="number" formControlName="longitude">
            </mat-form-field>
            <mat-form-field>
                <mat-label>Latitude:</mat-label>
                <input matInput type="number" formControlName="latitude">
            </mat-form-field>
        </div>
        <form [formGroup]="pictureForm">
            <div class="address">
                <mat-form-field>
                    <mat-label>Picture URL:  </mat-label>
                    <input matInput type="text" name="picture" formControlName="picture">
                </mat-form-field>
                <button mat-raised-button class="buttonPlus" (click)="addPicture()">+</button>
            </div>
        </form>
        <p *ngIf="pictures.length > 0">Pictures preview:</p>
                <table>
                    <tr *ngFor="let p of pictures; index as i">
                        <td><img [src]="p" alt="Checkpoint picture" width="200" height="150"></td>
                        <td>
                            <button mat-raised-button class="buttonPlus" (click)="deletePicture(i)">-</button>
                        </td>
                    </tr>
                </table>

            <mat-form-field *ngIf="!shouldEdit">
                <label>Checkpoint status</label>
                <mat-select formControlName="status">
                  <mat-option value="Private">Private</mat-option>
                  <mat-option value="Public">Public</mat-option>
                </mat-select>
            </mat-form-field>
    </div>
    <div class="routingButton">
        <button (click)="onBack()" class="button" mat-raised-button>Back</button>
        <button *ngIf="!shouldEdit" class="button" (click)="addCheckpoint()" mat-raised-button>Add checkpoint</button>
        <button *ngIf="shouldEdit" class="button" (click)="updateCheckpoint()" mat-raised-button>Next</button>

    </div>
</form>
        